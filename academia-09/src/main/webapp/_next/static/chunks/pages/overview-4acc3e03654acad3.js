(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{7681:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/overview",function(){return n(7767)}])},5418:function(e,r,n){"use strict";n.d(r,{N:function(){return t},P:function(){return s}});var t={title:"Error",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0},s={title:"Success",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}},5087:function(e,r,n){"use strict";n.d(r,{Z:function(){return R}});var t=n(5893),s=n(8377),i=(n(4775),n(7659),n(1903)),a=n(315),o=n(3841),u=n(431),c=n(4054),l=n(7294),d=n(4051),x=n.n(d),h=n(6242),m=n(4267),f=n(5861),p=n(3321),v=n(5486),Z=n(8462),j=n(891),g=n(8987),y=n(9661),w=n(9334),b=n(7720),P=n(6886),S=n(8078),k=n(6455),N=n.n(k),C=n(3252),E=n(4347),_=n(8849),T=n(918),W=n(5418);function D(e,r,n,t,s,i,a){try{var o=e[i](a),u=o.value}catch(c){return void n(c)}o.done?r(u):Promise.resolve(u).then(t,s)}function A(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){D(i,t,s,a,o,"next",e)}function o(e){D(i,t,s,a,o,"throw",e)}a(void 0)}))}}var L=function(e){var r=e.modulerun,n=e.user,i=(0,l.useState)(null),a=i[0],o=i[1],u=(0,l.useState)(!0),c=u[0],d=u[1],k=(0,l.useState)(r.enrolled?"Unenroll":"Enroll"),D=k[0],L=k[1],I=(0,l.useState)(r.enrolled?"error":"success"),B=I[0],R=I[1];function G(){return(G=A(x().mark((function e(){var t,s,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.enrolled){e.next=15;break}return e.prev=1,e.next=4,v.Z.delete("/enrollments/".concat(r.mrid,"-").concat(n.pid));case 4:t=e.sent,204==(s=t.status)?(R("success"),L("Enroll"),r.enrolled=!1,W.P.text="You have successfully unenrolled from this module",N().fire(W.P)):(W.N.text="An error occured while trying to unenroll (Status: "+s+")",N().fire(W.N)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),W.N.text="An error occured while trying to unenroll (Status: "+e.t0.response.status+")",N().fire(W.N);case 13:e.next=27;break;case 15:return e.prev=15,e.next=18,v.Z.post("/enrollments/".concat(r.mrid,"-").concat(n.pid));case 18:i=e.sent,201==(a=i.status)?(R("error"),L("Unenroll"),r.enrolled=!0,W.P.text="You have successfully enrolled from this module",N().fire(W.P)):(W.N.text="An error occured while trying to enrolled (Status: "+a+")",N().fire(W.N)),e.next=27;break;case 23:e.prev=23,e.t1=e.catch(15),W.N.text="An error occured while trying to enroll (Status: "+e.t1.response.status+")",N().fire(W.N);case 27:case"end":return e.stop()}}),e,null,[[1,9],[15,23]])})))).apply(this,arguments)}return(0,l.useEffect)((function(){A(x().mark((function e(){var n,t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.get("/modules/".concat(r.mid));case 3:n=e.sent,(t=n.data)&&o(t),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(r.mid)}),[r.mid]),(0,t.jsx)(s.Z,{marginTop:2,children:c?(0,t.jsx)(h.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsx)(S.Z,{variant:"rect",width:300,height:300})})}):(0,t.jsx)(h.Z,{children:(0,t.jsxs)(m.Z,{children:[(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(j.ZP,{children:(0,t.jsx)(f.Z,{variant:"h5",component:"div",children:a.name})}),(0,t.jsxs)(j.ZP,{children:[(0,t.jsx)(g.Z,{children:(0,t.jsx)(y.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,t.jsx)(C.Z,{})})}),(0,t.jsx)(w.Z,{primary:r.semester+" / "+r.year,secondary:"Date"})]}),(0,t.jsx)(b.Z,{variant:"inset",component:"li"}),(0,t.jsxs)(j.ZP,{children:[(0,t.jsx)(g.Z,{children:(0,t.jsx)(y.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,t.jsx)(E.Z,{})})}),(0,t.jsx)(w.Z,{primary:""!=r.teachers?r.teachers.map((function(e){return e.firstname+" "+e.lastname})).join(", "):"*No teachers assigned*",secondary:"Teachers"})]}),(0,t.jsx)(b.Z,{variant:"inset",component:"li"}),(0,t.jsxs)(j.ZP,{children:[(0,t.jsx)(g.Z,{children:(0,t.jsx)(y.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,t.jsx)(_.Z,{})})}),(0,t.jsx)(w.Z,{primary:r.description,secondary:"Description"})]}),r.grade?(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(b.Z,{variant:"inset",component:"li"}),(0,t.jsxs)(j.ZP,{children:[(0,t.jsx)(g.Z,{children:(0,t.jsx)(y.Z,{sx:{backgroundColor:"#ffb74d"},children:(0,t.jsx)(T.Z,{})})}),(0,t.jsx)(w.Z,{primary:r.grade,secondary:"Grade"})]})]}):null]}),(0,t.jsx)(P.ZP,{container:!0,direction:"column",justify:"space-between",alignItems:"center",children:(0,t.jsx)(p.Z,{color:B,variant:"outlined",onClick:function(){return G.apply(this,arguments)},fullWidth:!0,disabled:!!r.grade,children:D})})]})})})},I=n(2109),B=n(7948);function R(r){var n=r.moduleruns,d=r.isTeacher,x=r.user,h=(0,l.useState)(""),m=h[0],f=h[1],p=(0,l.useState)(""),v=p[0],Z=p[1],j=(0,l.useState)(""),g=j[0],y=j[1],w=(0,t.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,t.jsx)(c.Z,{fullWidth:!0,children:(0,t.jsxs)(s.Z,{noValidate:!0,sx:{mt:1},children:[(0,t.jsx)(i.Z,{margin:"normal",required:!0,fullWidth:!0,id:"year",label:"Year [yyyy]",name:"year",defaultValue:m,value:m,inputProps:{min:"2020",max:"2030",type:"number",step:"1",pattern:"[0-9][0-9][0-9][0-9]"},color:""!==m&&m>=2e3&&m<=2030?"success":"error",error:!(""!==m&&m>=2e3&&m<=2030),onChange:function(e){e.preventDefault(),f(e.target.value)},autoFocus:!0}),(0,t.jsxs)(c.Z,{fullWidth:!0,margin:"normal",children:[(0,t.jsx)(o.Z,{id:"semesterLabel",children:"Semester *"}),(0,t.jsxs)(a.Z,{labelId:"semesterLabel",id:"semester",name:"semester",label:"Semester *",value:v||"",onChange:function(e){e.preventDefault(),Z(e.target.value)},fullWidth:!0,children:[(0,t.jsx)(u.Z,{value:"FS",children:"FS"}),(0,t.jsx)(u.Z,{value:"HS",children:"HS"})]})]}),d?(0,t.jsxs)(c.Z,{fullWidth:!0,margin:"normal",children:[(0,t.jsx)(o.Z,{id:"moduleRunLabel",children:"Module Run*"}),(0,t.jsx)(a.Z,{labelId:"moduleRunLabel",id:"moduleRun",name:"moduleRun",label:"Module Run*",value:g,onChange:function(e){e.preventDefault(),y(e.target.value)},children:n?n.map((function(e){return e.year==m&&e.semester==v?(0,t.jsx)(u.Z,{value:e.mrid||"",children:e.name},e.mrid):null})):(0,t.jsx)(u.Z,{value:"",children:"Loading..."})})]}):null]})})});return(0,t.jsxs)(B.Z,{children:[w,d&&n?m&&v&&g?n.map((function(e){return g==e.mrid?(0,t.jsx)(I.Z,{mrid:e.mrid,students:e.enrollments},e.mrid):null})):null:n.map((function(r){return m==r.year&&v==r.semester?(0,t.jsx)(L,{modulerun:r,user:x},e.mrid):null}))]})}e=n.hmd(e)},2109:function(e,r,n){"use strict";n.d(r,{Z:function(){return i}});var t=n(5893),s=n(7659);function i(e){var r=e.mrid,n=e.students;return(0,t.jsx)("div",{children:n.map((function(e){return(0,t.jsx)(s.s,{student:e,mrid:r},e.pid)}))})}},4775:function(e,r,n){"use strict";n.d(r,{Q:function(){return E}});var t=n(4051),s=n.n(t),i=n(5893),a=(n(7294),n(6242)),o=n(4267),u=n(5861),c=n(3321),l=n(5486),d=n(8462),x=n(891),h=n(8987),m=n(9661),f=n(9334),p=n(7720),v=n(6455),Z=n.n(v),j=n(1903),g=n(4054),y=n(8377),w=n(9083),b=n(1946),P=n(8849),S=n(7835),k=n(5418);function N(e,r,n,t,s,i,a){try{var o=e[i](a),u=o.value}catch(c){return void n(c)}o.done?r(u):Promise.resolve(u).then(t,s)}function C(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){N(i,t,s,a,o,"next",e)}function o(e){N(i,t,s,a,o,"throw",e)}a(void 0)}))}}var E=function(e){var r=e.module,n=e.user,t="module-"+r.mid;function v(){return(v=C(s().mark((function e(n){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l.Z.put("/modules/".concat(r.mid),{mid:r.mid,description:document.getElementById(t+"-description").value});case 4:i=e.sent,200==(a=i.status)?(k.P.text="Module description updated",Z().fire(k.P)):(k.N.text="An error occured while trying to update the module description (Status: "+a+")",Z().fire(k.N)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),k.N.text="An error occured while trying to update the module description (Status: "+e.t0.response.status+")",Z().fire(k.N);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,i.jsx)(y.Z,{marginTop:2,children:(0,i.jsx)(a.Z,{variant:"outlined",id:t,children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(x.ZP,{children:(0,i.jsx)(u.Z,{sx:{fontSize:14},color:"primary",gutterBottom:!0,children:r.mid})}),(0,i.jsxs)(x.ZP,{children:[(0,i.jsx)(h.Z,{children:(0,i.jsx)(m.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,i.jsx)(w.Z,{})})}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(u.Z,{variant:"h5",component:"div",children:r.name})})]}),(0,i.jsx)(p.Z,{variant:"inset",component:"li"}),(0,i.jsxs)(x.ZP,{children:[(0,i.jsx)(h.Z,{children:(0,i.jsx)(m.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,i.jsx)(b.Z,{})})}),(0,i.jsx)(f.Z,{primary:n&&n.pid==r.coordinator.pid?r.coordinator.firstname+" "+r.coordinator.lastname+" (*you)":r.coordinator.firstname+" "+r.coordinator.lastname,secondary:"Coordinator"})]}),(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(p.Z,{variant:"inset",component:"li"}),(0,i.jsxs)(x.ZP,{children:[(0,i.jsx)(h.Z,{children:(0,i.jsx)(m.Z,{sx:{backgroundColor:"#90a4ae"},children:(0,i.jsx)(P.Z,{})})}),n&&n.pid==r.coordinator.pid?(0,i.jsxs)(g.Z,{fullWidth:!0,children:[(0,i.jsx)(j.Z,{margin:"normal",required:!0,fullWidth:!0,id:t+"-description",label:"Description",name:"description",defaultValue:r.description,multiline:!0,rows:4}),(0,i.jsx)(c.Z,{variant:"contained",color:"primary",onClick:function(e){return v.apply(this,arguments)},startIcon:(0,i.jsx)(S.Z,{}),children:"Change Description"})]}):(0,i.jsx)(f.Z,{primary:r.description,secondary:"Description"})]})]})]})})})})}},7659:function(e,r,n){"use strict";n.d(r,{s:function(){return k}});var t=n(4051),s=n.n(t),i=n(5893),a=n(7294),o=n(6242),u=n(4267),c=n(5861),l=n(4054),d=n(9226),x=n(3841),h=n(315),m=n(431),f=n(5486),p=n(6455),v=n.n(p),Z=n(8462),j=n(891),g=n(9661),y=n(9334),w=n(5731),b=n(918),P=n(5418);function S(e,r,n,t,s,i,a){try{var o=e[i](a),u=o.value}catch(c){return void n(c)}o.done?r(u):Promise.resolve(u).then(t,s)}var k=function(e){var r=e.mrid,n=e.student,t=(0,a.useState)(n.grade?n.grade:""),p=t[0],k=t[1];(0,a.useEffect)((function(){var e;(e=s().mark((function e(){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Z.get("/enrollments/".concat(r,"-").concat(n.pid));case 3:t=e.sent,(i=t.data).grade&&k(i.grade),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),P.N.text="An error occured while trying to load enrollments (Status: "+e.t0.response.status+")",v().fire(P.N);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){S(i,t,s,a,o,"next",e)}function o(e){S(i,t,s,a,o,"throw",e)}a(void 0)}))})(r,n.pid)}),[r,n.pid]);var N=(0,i.jsx)(l.Z,{fullWidth:!0,children:(0,i.jsxs)(d.Z,{noValidate:!0,children:[(0,i.jsx)(x.Z,{id:"gradeLabel",children:"Grade"}),(0,i.jsx)(h.Z,{labelId:"gradeLabel",id:"grade",name:"grade",label:"grade *",value:p,onChange:function(e){f.Z.put("/enrollments/".concat(r,"-").concat(n.pid),{grade:e.target.value}).then((function(r){200===r.status?(P.P.text="Grade updated",v().fire(P.P)):(P.N.text="Grade not updated (Status: "+r.status+")",v().fire(P.N)),k(e.target.value)})).catch((function(e){P.N.text="Grade not updated (Status: "+e.response.status+")",v().fire(P.N)}))},fullWidth:!0,children:["a","b","c","d","e","f"].map((function(e){return(0,i.jsx)(m.Z,{value:e,children:e},e)}))})]})});return(0,i.jsx)(d.Z,{marginTop:2,children:(0,i.jsx)(o.Z,{children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsxs)(j.ZP,{children:[(0,i.jsx)(w.Z,{children:(0,i.jsx)(g.Z,{src:"/images/avatar/student.png"})}),(0,i.jsx)(y.Z,{children:(0,i.jsxs)(c.Z,{variant:"h5",component:"div",children:[n.firstname," ",n.lastname]})})]}),(0,i.jsxs)(j.ZP,{children:[(0,i.jsx)(w.Z,{children:(0,i.jsx)(g.Z,{sx:{backgroundColor:"#ffb74d"},children:(0,i.jsx)(b.Z,{})})}),(0,i.jsx)(y.Z,{children:N})]})]})})})})}},7767:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return k}});var t=n(4051),s=n.n(t),i=n(5893),a=n(5861),o=n(7294),u=n(7948),c=n(6720),l=n(9226),d=n(6810),x=n(9986),h=n(2842),m=n(5486),f=n(8078),p=(n(2109),n(4775));function v(e){var r=e.modules,n=e.user;return r.sort((function(e,r){return e.mid<r.mid?-1:e.mid>r.mid?1:0})),(0,i.jsx)("div",{children:r.map((function(e){return(0,i.jsx)(p.Q,{module:e,user:n},e.mid)}))})}var Z=n(1528),j=n(2359),g=n(5087),y=n(5418),w=n(6455),b=n.n(w);function P(e,r,n,t,s,i,a){try{var o=e[i](a),u=o.value}catch(c){return void n(c)}o.done?r(u):Promise.resolve(u).then(t,s)}function S(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){P(i,t,s,a,o,"next",e)}function o(e){P(i,t,s,a,o,"throw",e)}a(void 0)}))}}function k(){var e=(0,h.a)(),r=(0,o.useState)(!0),n=r[0],t=r[1],p=(0,o.useState)(!0),w=p[0],P=p[1],k=(0,o.useState)(null),N=k[0],C=k[1],E=(0,o.useState)(null),_=E[0],T=E[1],W=(0,o.useState)("moduleruns"),D=W[0],A=W[1],L=(0,i.jsx)(l.Z,{paddingTop:2,children:(0,i.jsxs)(Z.Z,{showLabels:!0,value:D,onChange:function(e,r){A(r)},children:[(0,i.jsx)(j.Z,{value:"moduleruns",label:"Moduleruns",icon:(0,i.jsx)(x.Z,{})}),e.user&&"teacher"==e.user.role?(0,i.jsx)(j.Z,{value:"modules",label:"Modules",icon:(0,i.jsx)(d.Z,{})}):null]})}),I=!1;return e.user&&("teacher"===e.user.role&&(I=!0),e.user),(0,o.useEffect)((function(){S(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("/moduleruns");case 3:r=e.sent,n=r.data,C(n),t(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),y.N.text="An error occured while trying to load moduleruns (Status: "+e.t0.response.status+")",b().fire(y.N);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))(),S(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("/modules");case 3:r=e.sent,n=r.data,T(n),P(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),y.N.text="An error occured while trying to load modules (Status: "+e.t0.response.status+")",b().fire(y.N);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[D]),(0,i.jsxs)(u.Z,{component:"main",maxWidth:"xs",children:[(0,i.jsx)(c.ZP,{}),(0,i.jsx)(a.Z,{component:"h1",variant:"h3",mt:2,children:e.loading?(0,i.jsx)(f.Z,{}):I?"Teacher Overview":"Student Overview"}),L,"moduleruns"===D?n||e.loading?(0,i.jsx)(f.Z,{}):(0,i.jsx)(g.Z,{moduleruns:N,isTeacher:I,user:e.user}):w||e.loading?(0,i.jsx)(f.Z,{}):(0,i.jsx)(v,{modules:_,isTeacher:I,user:e.user})]})}}},function(e){e.O(0,[807,898,774,888,179],(function(){return r=7681,e(e.s=r);var r}));var r=e.O();_N_E=r}]);